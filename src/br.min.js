!function(t){function e(){this._events={},this._run={},this._atOnce={},this._final={}}function n(){this._idCount=0,this._gatherData={},this.action=s}function r(){}function a(t){this._nexts=[];var e=new n;if(!t){this._publicData={gather:e},this._action=function(){};var r=this;e.action=function(t){r._action(t)}}this._args=[]}var i={paths:{},baseUrl:"",map:{},tempM:null,version:"browserRequire 1.0",br:{}},o="ready",u="error",s=function(){},c=function(t){return Object.prototype.toString.call(t).toLowerCase().replace(/(\[object )|(])/g,"")},f=Object.create||function(t){var e=s;return e.prototype=t,new e},p=function(t){return Array.prototype.slice.call(t)},h=function(t,e){for(var n=0,r=t.length;r>n;n++)e(n,t[n])},l=function(){for(var t=p(arguments),e=t.splice(0,1)[0],n=0,r=t.length;r>n;n++)for(var a in t[n])e[a]=t[n][a];return e},d=function(t){return t.replace(/.js$/g,"")},g=function(t){return t.concat(".js")};e.fn=e.prototype,e.fn.bind=function(t,e,n){var r=this._atOnce[t],a=function(){e({eventName:t,bData:n,tData:r.tData})};if(r)return void(r.async?setTimeout(a,0):a());if(this._run[t])throw this._run[t]=0,"event running:"+t;var i=this,o=this._events[t]||function(){return i._events[t]=[],i._events[t]}();o.push({eventName:t,fun:e,bData:n})},e.fn.trigger=function(t,e){var n=this._events[t]||[];this._run[t]=!0;for(var r=0,a=n.length;a>r;r++){var i=n[r];if(i){var o=i.fun({eventName:i.eventName,bData:i.bData,tData:e});if(0==o)return void(this._run[t]=!1)}}if(this._final[t]){var u=this._final[t]();0==u&&delete this._final[t]}this._run[t]=!1;var s=this._clones;if(s)for(var r=0;r<s.length;r++)s[r].trigger(t,e)},e.fn.unbind=function(t,e){if(this._run[t])throw this._run[t]=0,"event running:"+t;if(t&&!e)return void(this._events[t]=[]);if(!t&&!e)return void(this._events={});for(var n=this._events[t],r=0,a=n.length;a>r;r++)if(e==n[r].fun){n.splice(r,1);break}},e.fn.setOnce=function(t,e,n){this._atOnce[t]={tData:e,async:n}},e.fn.last=function(t,e){this._final[t]=e},e.fn.clone=function(){this._clones||(this._clones=[]);var t=new e;return this._clones.push(t),t._cSource=this,t},n.prototype.create=function(){var t=this,e=this._idCount,n=function(n){n&&(t._gatherData[e]=n),t._idCount--,t._idCount||t.action(t._gatherData)};return this._idCount++,n},r.fn=r.prototype,r.fn.ready=s,r.fn.error=s,r.fn.loading=s,r.fn.sure=function(t){return this.ready=t||s,this},r.fn.go=function(t){return this.loading=t||s,this},r.fn.err=function(t){return this.error=t||s,this},r.fn.post=function(t){return this.data=t,this},a.prototype=f(r.prototype),a.prototype.require=function(){var t=new a(!0);t._publicData=this._publicData,t._subGather=this._publicData.gather.create(),t._args=p(arguments);var e=f(t);return e.previousRequire=this,this._nexts.push(e),e},a.prototype.end=function(){this.ready=s},a.prototype.getCount=function(){var t=0;return function(e){var n=arguments.callee;t+=e._args.length,h(e._nexts,function(t,e){n(e)})}(this),t};var m={getScriptTag:function(t){t=g(d(t));var e=document.createElement("script");return e.type="text/javascript",e.setAttribute("async",!0),e.src=t,e},setModule:function(t,e){if(t){t=i.baseUrl.concat(t);var n=function(t,e){i.map[t]={type:2,module:e}};switch(c(t)){case"string":n(t,e);break;case"array":for(var r=0,a=t.length;a>r;r++)n(t[r],e)}}},setModuleAgent:function(t,e,n){var r,a=null;return i.tempM&&(m.setTempM(i.tempM.main,t.loadEvent.groupEvent._combRequire.data),r=i.tempM,a=r.lagGather,i.tempM=null,a&&(a.parentModule=n,a.runError=function(){t.type=3,e.trigger(u,{type:"error",path:n})})),a?void(a.action=function(){t.type=2,t.module=r.main.exports,m.setModule(r.names,t.module),e.trigger(o,{type:"finish",path:n,module:t.module})}):(r&&(t.module=r.main.exports,m.setModule(r.names,t.module)),t.type=2,void e.trigger(o,{type:"finish",path:n,module:t.module}))},loadModule:function(t){var n=m.getScriptTag(t),r=new e,a={type:1,loadEvent:r,script:n};return i.map[t]=a,n.onload=function(){m.setModuleAgent(a,r,t)},n.onerror=function(){a.type=3,r.trigger(u,{type:"error",path:t})},setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(n)},0),r},loadAgent:function(t){var n=i.map[t]||{type:0},r="";switch(n.type){case 0:r=m.loadModule(t);break;case 1:r=n.loadEvent.clone();break;case 2:r=new e,r.setOnce(o,{type:"loaded",path:t,module:i.map[t].module},!0);break;case 3:r=new e,r.setOnce(u,{type:"error",path:t})}return r.eventType=n.type,r},getByPath:function(t){var e=i.paths[t]||t;return/.+:\/\//g.test(e)?e:i.baseUrl.concat(e)},argRequire:function(t){var r=new e,a=new n,s={succeedPaths:[],errorPaths:[],totalPaths:[]},c=!1;r.args=t;for(var f=0,p=t.length;p>f;f++)!function(e){var n=m.getByPath(t[e]),f=a.create(),p=m.loadAgent(n);p.path=n,p.uri=t[e],p.groupEvent=r;var h=function(t){var a={index:e,uri:n,type:t.tData.type};r.trigger("loading",l(a,s))};p.bind(o,function(t){s.succeedPaths.push(n),h(t),f({index:e,module:t.tData.module})}),p.last(o,function(){i.map[n]&&delete i.map[n].loadEvent}),p.bind(u,function(r){c=!0,s.errorPaths.push(n),console.log("error pathï¼š"+n+"\ngroup:"+t.toString()),h(r),f(e)}),s.totalPaths.push(n)}(f);return a.action=function(t){c?r.trigger("failure",l({descript:"failed to load"},s)):r.trigger("succeed",t)},r},assemblyRequire:function(t){var e=t._args,n=m.argRequire(e);n._combRequire=t,t._argEvent=n,n.bind("succeed",function(e){var n=[];for(var r in e.tData)n[e.tData[r].index]=e.tData[r].module;t.ready.apply(t,n);for(var a=t._nexts,r=0,i=a.length;i>r;r++)m.assemblyRequire(a[r]);t._subGather?t._subGather():t._action&&!t._nexts.length&&t._action()}),n.bind("failure",function(e){t.error(e.tData);var n=i.br.error;n&&n(e.tData),t._err&&t._err(e.tData)}),n.bind("loading",function(e){t.loading(e.tData)})},combinateRequire:function(t){var e=new a;e._args=p(t);var n=f(e);return setTimeout(function(){m.assemblyRequire(n)},0),[n,e]},require:function(){var t=m.combinateRequire(arguments)[0];return t},defindedRequire:function(){if(i.tempM){i.tempM.lagGather||(i.tempM.lagGather=new n);var t=i.tempM.lagGather,e=t.create(),r=m.combinateRequire(arguments),a=r[0],o=r[1];o._action=function(){e()},o._err=function(){for(var e=[],n=0,r=o._args.length;r>n;n++)e.push(m.getByPath(o._args[n]));var a={parentModule:t.parentModule,errorPaths:o._args,descript:"Sub module load error",paths:e};console.log(a),t.runError()}}else var a=m.combinateRequire(arguments)[0];return a},define:function(t,e){i.tempM={main:t},i.tempM.names=e},setTempM:function(t,e){switch(i.tempM.main={},c(t)){case"function":var n={exports:{}},r=t.call({data:e},m.defindedRequire,n.exports,n);r?i.tempM.main.exports=r:i.tempM.main=n;break;default:i.tempM.main.exports=t}}};m.define.br=!0;var v={config:function(t){var e={paths:{},baseUrl:""};l(e,t),i.paths=e.paths,i.baseUrl=e.baseUrl?e.baseUrl.concat("/"):""},extend:function(o,u){var s={Require:r,BindEvent:e,GatherFunction:n,CombRequire:a},h={getType:c,transArgumtnts:p,extend:l,getPath:d,concatJS:g,create:f};i.br[u]||(i.br[u]=!0),o(i,h,s,m,t)},use:function(t){if(i.map[t]&&2==i.map[t].type)return i.map[t].module;var e=m.getByPath(t);return i.map[e]&&2==i.map[e].type?i.map[e].module:void 0},has:function(t){return!!i.map[m.getByPath(t)]},destory:function(t){t=m.getByPath(t),i.map[t].script.remove(),delete i.map[t]},version:i.version,br:i.br};l(m.require,v),l(m.defindedRequire,v);var _=t.require;_&&function(){v.config(_);var t=_.ready;setTimeout(function(){t&&function(){t()}()},0)}(),t.require=m.require,t.define=m.define}(this);