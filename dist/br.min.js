!function(t){function e(){this._events={},this._run={},this._atOnce={},this._final={}}function r(){this._idCount=0,this._gatherData={},this.action=s}function n(){}function a(t){this._nexts=[];var e=new r;if(!t){this._publicData={gather:e},this._action=function(){};var n=this;e.action=function(t){n._action(t)}}this._args=[]}var i={paths:{},baseUrl:"",map:{},tempM:null,version:"browserRequire 1.0",br:{}},o="ready",u="error",s=function(){},c=function(t){return Object.prototype.toString.call(t).toLowerCase().replace(/(\[object )|(])/g,"")},p=Object.create||function(t){var e=s;return e.prototype=t,new e},l=function(t){return Array.prototype.slice.call(t)},f=function(){for(var t=l(arguments),e=t.splice(0,1)[0],r=0,n=t.length;n>r;r++)for(var a in t[r])e[a]=t[r][a];return e},h=function(t){return t.replace(/.js$/g,"")},d=function(t){return t.concat(".js")};e.prototype.bind=function(t,e,r){var n=this._atOnce[t],a=function(){e({eventName:t,bData:r,tData:n.tData})};if(n)return void(n.async?setTimeout(a,0):a());if(this._run[t])throw this._run[t]=0,"event running:"+t;var i=this,o=this._events[t]||function(){return i._events[t]=[],i._events[t]}();o.push({eventName:t,fun:e,bData:r})},e.prototype.trigger=function(t,e){var r=this._events[t]||[];this._run[t]=!0;for(var n=0,a=r.length;a>n;n++){var i=r[n];if(i){var o=i.fun({eventName:i.eventName,bData:i.bData,tData:e});if(0==o)return void(this._run[t]=!1)}}if(this._final[t]){var u=this._final[t]();0==u&&delete this._final[t]}this._run[t]=!1;var s=this._clones;if(s)for(var n=0;n<s.length;n++)s[n].trigger(t,e)},e.prototype.unbind=function(t,e){if(this._run[t])throw this._run[t]=0,"event running:"+t;if(t&&!e)return void(this._events[t]=[]);if(!t&&!e)return void(this._events={});for(var r=this._events[t],n=0,a=r.length;a>n;n++)if(e==r[n].fun){r.splice(n,1);break}},e.prototype.setOnce=function(t,e,r){this._atOnce[t]={tData:e,async:r}},e.prototype.last=function(t,e){this._final[t]=e},e.prototype.clone=function(){this._clones||(this._clones=[]);var t=new e;return this._clones.push(t),t._cSource=this,t},r.prototype.create=function(){var t=this,e=this._idCount,r=function(r){r&&(t._gatherData[e]=r),t._idCount--,t._idCount||t.action(t._gatherData)};return this._idCount++,r},n.prototype.ready=s,n.prototype.error=s,n.prototype.loading=s,a.prototype=p(n.prototype),a.prototype.require=function(){var t=new a(!0);t._publicData=this._publicData,t._subGather=this._publicData.gather.create(),t._args=l(arguments);var e=p(t);return e.previousRequire=this,this._nexts.push(e),e},a.prototype.end=function(){this.ready=s};var g={getScriptTag:function(t){t=d(h(t));var e=document.createElement("script");return e.type="text/javascript",e.setAttribute("async",!0),e.src=t,e},setModule:function(t,e){if(t){t=i.baseUrl.concat(t);var r=function(t,e){i.map[t]={type:2,module:e}};switch(c(t)){case"string":r(t,e);break;case"array":for(var n=0,a=t.length;a>n;n++)r(t[n],e)}}},setModuleAgent:function(t,e,r){var n,a=null;return i.tempM&&(n=i.tempM,a=n.lagGather,i.tempM=null,a&&(a.parentModule=r,a.runError=function(){t.type=3,e.trigger(u,{type:"error",path:r})})),a?void(a.action=function(){t.type=2,t.module=n.main.exports,g.setModule(n.names,t.module),e.trigger(o,{type:"finish",path:r,module:t.module})}):(n&&(t.module=n.main.exports,g.setModule(n.names,t.module)),t.type=2,void e.trigger(o,{type:"finish",path:r,module:t.module}))},loadModule:function(t){var r=g.getScriptTag(t),n=new e,a={type:1,loadEvent:n,script:r};return i.map[t]=a,r.onload=function(){g.setModuleAgent(a,n,t)},r.onerror=function(){a.type=3,n.trigger(u,{type:"error",path:t})},setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(r)},0),n},loadAgent:function(t){var r=i.map[t]||{type:0},n="";switch(r.type){case 0:n=g.loadModule(t);break;case 1:n=r.loadEvent.clone();break;case 2:n=new e,n.setOnce(o,{type:"loaded",path:t,module:i.map[t].module},!0);break;case 3:n=new e,n.setOnce(u,{type:"error",path:t})}return n.eventType=r.type,n},getByPath:function(t){var e=i.paths[t]||t;return/.+:\/\//g.test(e)?e:i.baseUrl.concat(e)},argRequire:function(t){var n=new e,a=new r,s={succeedPaths:[],errorPaths:[],totalPaths:[]},c=!1;n.args=t;for(var p=0,l=t.length;l>p;p++)!function(e){var r=g.getByPath(t[e]),p=a.create(),l=g.loadAgent(r);l.path=r,l.uri=t[e],l.groupEvent=n;var h=function(t){var a={index:e,uri:r,type:t.tData.type};n.trigger("loading",f(a,s))};l.bind(o,function(t){s.succeedPaths.push(r),h(t),p({index:e,module:t.tData.module})}),l.last(o,function(){i.map[r]&&delete i.map[r].loadEvent}),l.bind(u,function(n){c=!0,s.errorPaths.push(r),console.log("error pathï¼š"+r+"\ngroup:"+t.toString()),h(n),p(e)}),s.totalPaths.push(r)}(p);return a.action=function(t){c?n.trigger("failure",f({descript:"failed to load"},s)):n.trigger("succeed",t)},n},assemblyRequire:function(t){var e=t._args,r=g.argRequire(e);r._combRequire=t,t._argEvent=r,r.bind("succeed",function(e){var r=[];for(var n in e.tData)r[e.tData[n].index]=e.tData[n].module;t.ready.apply(t,r);for(var a=t._nexts,n=0,i=a.length;i>n;n++)g.assemblyRequire(a[n]);t._subGather?t._subGather():t._action&&!t._nexts.length&&t._action()}),r.bind("failure",function(e){t.error(e.tData);var r=i.br.error;r&&r(e.tData),t._err&&t._err(e.tData)}),r.bind("loading",function(e){t.loading(e.tData)})},combinateRequire:function(t){var e=new a;e._args=l(t);var r=p(e);return setTimeout(function(){g.assemblyRequire(r)},0),[r,e]},require:function(){var t=g.combinateRequire(arguments)[0];return t},defindedRequire:function(){if(i.tempM){i.tempM.lagGather||(i.tempM.lagGather=new r);var t=i.tempM.lagGather,e=t.create(),n=g.combinateRequire(arguments),a=n[0],o=n[1];o._action=function(){e()},o._err=function(){for(var e=[],r=0,n=o._args.length;n>r;r++)e.push(g.getByPath(o._args[r]));var a={parentModule:t.parentModule,errorPaths:o._args,descript:"Sub module load error",paths:e};console.log(a),t.runError()}}else var a=g.combinateRequire(arguments)[0];return a},define:function(t,e){switch(i.tempM={main:{}},c(t)){case"function":var r=p(window),n={exports:{}},a=t.call(r,g.defindedRequire,n.exports,n);a?i.tempM.main.exports=a:i.tempM.main=n;break;default:i.tempM.main.exports=t}i.tempM.names=e}};g.define.br=!0;var v={config:function(t){var e={paths:{},baseUrl:""};f(e,t),i.paths=e.paths,i.baseUrl=e.baseUrl?e.baseUrl.concat("/"):""},extend:function(o,u){var s={Require:n,BindEvent:e,GatherFunction:r,CombRequire:a},v={getType:c,transArgumtnts:l,extend:f,getPath:h,concatJS:d,create:p};i.br[u]||(i.br[u]=!0),o(i,v,s,g,t)},use:function(t){if(i.map[t]&&2==i.map[t].type)return i.map[t].module;var e=g.getByPath(t);return i.map[e]&&2==i.map[e].type?i.map[e].module:void 0},has:function(t){return!!i.map[g.getByPath(t)]},destory:function(t){t=g.getByPath(t),i.map[t].script.remove(),delete i.map[t]},version:i.version,br:i.br};f(g.require,v),f(g.defindedRequire,v);var m=t.require;m&&function(){v.config(m);var t=m.ready;setTimeout(function(){t&&function(){t()}()},0)}(),t.require=g.require,t.define=g.define}(this);